{{extend 'layout.html'}}

<h1>{{=T('Clients')}}</h1>

{{if show_form:}}
<button type="button" class="btn btn-info" data-toggle="collapse" data-target="#form">{{=T('New')}}</button>
<div id="form" class="collapse {{if request.args:}}in{{pass}}">
  {{=form}}
</div>
{{pass}}

<table class="table">
  <thead>
    <tr>
      <th>{{=T('Name')}}</th>
      <th>{{=T('Reseller')}}</th>
      <th>{{=T('Currency')}}</th>
      <th>{{=T('Time Zone')}}</th>
      <th>{{=T('Prefix')}}</th>
      <th>{{=T('Status')}}</th>
      <th>{{=T('Active rate sheet')}}</th>
      <th>{{=T('Actions')}}</th>
    </tr>
  </thead>
  <tbody>
    {{for client in clients:}}
    <tr>
      <td>{{=client.name}}</td>
      <td>{{=client.reseller.name}}</td>
      <td>{{=client.currency}}</td>
      <td>{{=client.time_zone}}</td>
      <td>{{=client.nb_prefix}}</td>
      <td>{{=client.status}}</td>
      <td>{{=client.active_rate_sheet.name if client.active_rate_sheet else T('not set')}}</td>
      <td>
	<div class="btn-group"  role="group" aria-label="actions">
	  {{=A(T('edit'), _href=URL('default', 'clients', args=client.id), _class="btn btn-link")}}
	  {{=A(T('rate sheets'), _href=URL('default', 'rate_sheets', args=client.id), _class="btn btn-link")}}
	  {{=A(T('statistics'), _href=URL('default', 'stats', args=client.id), _class="btn btn-link")}}
	  {{=A(T('triggers'), _href=URL('default', 'triggers', args=client.id), _class="btn btn-link")}}
	  {{=A(T('actions'), _href=URL('default', 'actions', args=client.id), _class="btn btn-link")}}
	  {{=A(T('CDRs'), _href=URL('engine', 'cdrs', args=client.id), _class="btn btn-link")}}
	</div>
      </td>
    </tr>
    {{pass}}
  </tbody>
</table>

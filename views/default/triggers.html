{{extend 'layout.html'}}

<h1>{{=T('Triggers')}}</h1>

<button type="button" class="btn btn-info" data-toggle="collapse" data-target="#form">{{=T('New')}}</button>
<div id="form" class="collapse {{if request.args(1):}}in{{pass}}">
  {{=form}}
</div>

<!-- <div style="float:right">
  {{=A(T('activate'), _href=URL('engine', 'activate_stats', args=client.id), _class="btn btn-danger")}}
     </div> -->

<table class="table">
  <thead>
    <tr>
      <th>{{=T('Name')}}</th>
      <th>{{=T('Threshold Type')}}</th>
      <th>{{=T('Threshold Value')}}</th>
      <th>{{=T('Recurrent')}}</th>
      <th>{{=T('Min Sleep')}}</th>
      <th>{{=T('Min Queued Items')}}</th>
      <th>{{=T('Action Id')}}</th>
      <th>{{=T('Actions')}}</th>
    </tr>
  </thead>
  <tbody>
    {{for tr in triggers:}}
    <tr>
      <td>{{=tr.name}}</td>
      <td>{{=tr.threshold_type}}</td>
      <td>{{=tr.threshold_value}}</td>
      <td>{{=tr.recurrent}}</td>
      <td>{{=tr.min_sleep}}</td>
      <td>{{=tr.min_queued_items}}</td>
      <td>{{=tr.act.name if tr.act else T('not set')}}</td>
      <td>
	<div class="btn-group"  role="group" aria-label="actions">
	  {{=A(T('edit'), _href=URL('default', 'triggers', args=(tr.client.id, tr.id)), _class="btn btn-link")}}
	</div>
      </td>
    </tr>
    {{pass}}
  </tbody>
</table>
